name: Monitoramento de Ingressos GNR

# 1. Quando executar:
# Define quando este workflow será acionado.
on:
  # Permite a execução manual (útil para testes)
  workflow_dispatch:
  # Agendamento CRON para rodar a cada hora (exatamente na hora cheia)
  schedule:
    # A sintaxe CRON é: minuto hora dia-do-mes mes dia-da-semana
    # 0 * * * * significa: "No minuto 0 de toda hora, de todo dia, de todo mês, de toda semana."
    - cron: '0 * * * *'

# 2. Onde executar:
# Define a sequência de trabalhos (jobs) a serem executados.
jobs:
  monitorar_venda:
    runs-on: ubuntu-latest # O sistema operacional que será usado (Ubuntu)

    # 3. Os passos a serem seguidos (steps):
    steps:
      # Passo 1: Faz o checkout do código do seu repositório
      - name: Checkout do Repositório
        uses: actions/checkout@v4

      # Passo 2: Configura o ambiente Python
      - name: Configurar Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' # Use uma versão recente do Python

      # Passo 3: Instala as dependências (requests e beautifulsoup4)
      - name: Instalar Dependências
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # Passo 4: Executa o script principal
      # A flag -u (unbuffered) garante que o log seja exibido em tempo real.
      # Nota: A função 'verificar_ingressos()' será executada apenas uma vez,
      # pois o loop 'while True' dentro do script deve ser removido para o GitHub Actions.
      - name: Executar Script de Monitoramento
        run: python guns_bot.py
